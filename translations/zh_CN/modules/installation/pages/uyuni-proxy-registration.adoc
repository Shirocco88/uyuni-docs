[[proxy-register]]
= 代理注册

可以使用引导脚本将代理系统注册为 Salt 客户端。

本过程说明如何设置软件频道，以及如何使用激活密钥将安装的代理注册为 {productname} 客户端。

[IMPORTANT]
====
确保将 openSUSE Leap 频道与全部所需的子频道和 {productname} Proxy 频道正确同步，这样才能在创建激活密钥时选择正确的子频道。
====



[[proxy-register-procedure]]
.过程：注册代理

. 在 {productname} Server 上，使用 [command]``spacewalk-common-channels`` 命令创建 openSUSE Leap 和 {productname} Proxy 频道。
    [command]``spacewalk-common-channels`` 是 [package]``spacewalk-utils`` 软件包的一部分：
+
----
spacewalk-common-channels \
opensuse_leap15_2 \
opensuse_leap15_2-non-oss \
opensuse_leap15_2-non-oss-updates \
opensuse_leap15_2-updates \
opensuse_leap15_2-uyuni-client \
uyuni-proxy-stable-leap-152
----
+
如果不使用 [systemitem]``uyuni-proxy-stable-leap-152`` 的话，您也可以尝试 [systemitem]``uyuni-proxy-devel-leap``（当前开发版）。
+
有关详细信息，请参见 xref:client-configuration:clients-opensuse.adoc[]。
+
. 在使用 openSUSE Leap 作为基础频道并使用其他频道作为子频道的情况下创建一个激活密钥。
    有关激活密钥的详细信息，请参见 xref:client-configuration:activation-keys.adoc[]。
. 修改代理的引导脚本。
    将 GPG 密钥添加到 [systemitem]``ORG_GPG_KEY=`` 参数。有关详细信息，请参见 xref:client-configuration:clients-opensuse.adoc[]。有关引导脚本的详细信息，请参见 xref:client-configuration:registration-bootstrap.adoc[]。
+
. 使用脚本引导客户端。
    有关详细信息，请参见 xref:client-configuration:registration-bootstrap.adoc[]。
. 导航到 menu:Salt[密钥]并接受该密钥。
    接受密钥后，新代理将显示在menu:系统[概栏]中的[guimenu]``最近注册的系统``部分。
. 导航到menu:系统细节[软件 > 软件频道]，检查代理频道是否已选中。

有关如何设置已注册的 {productname} Proxy，请参见 xref:uyuni-proxy-setup.adoc[]。
