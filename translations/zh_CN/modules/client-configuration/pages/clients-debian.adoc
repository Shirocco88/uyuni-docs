[[clients-debian]]
= 注册 {debian} 客户端

本节包含有关注册运行 {debian} 操作系统的 Salt 客户端的信息。

[IMPORTANT]
====
对于 {debian} 操作系统，{suse} 不提供支持。 {productname} 允许您管理 {debian} 客户端，但不提供支持。 使用 {productname} 管理 {debian} 客户端是试验性功能。 这些说明已在 {debian}{nbsp}9 Stretch 和 {debian} {nbsp}10 Buster 上经过测试。 请勿依赖生产环境中的 {debian} 客户端。
====

[NOTE]
====
{debian} 仅在作为 Salt 客户端的情况下受支持， 作为传统客户端时不受支持。
====

可以通过引导 {debian} 客户端来执行初始状态的运行以及配置文件的更新。



== 准备注册

您需要完成一些准备工作，然后才能将 {debian} 客户端注册到 {productname} 服务器：

* If you are using Debian{nbsp}9, install the required packages on the client before you attempt to register. On the client, at the command prompt, as root, run:
+
----
apt install apt-transport-https python-apt python3-apt
----

* Ensure DNS is correctly configured and provides an entry for the client. Alternatively, you can configure the ``/etc/hosts`` files on both the {productname} Server and the client with the appropriate entries.
* The client must have the date and time synchronized with the {productname} Server before registration.



== 添加软件频道

将 {debian} 客户端注册到您的 {productname} 服务器之前，您需要添加所需的软件频道，并同步这些频道。

ifeval::[{suma-content} == true]

此过程所需的产品包括：

[[debian-channels-wizard]]
[cols="1,1", options="header"]
.Debian 产品 - WebUI
|===
| 操作系统版本  | 产品名称
|{debian} 9  | Debian 9
 | {debian} 10 | Debian 10
|===

include::snippets/addchannels_vendor_webui.adoc[]

或者，您也可以在命令提示符处添加频道。 此过程所需的频道包括：

[[debian-channels-cli]]
[cols="1,1", options="header"]
.Debian 频道 - CLI
|===
| 操作系统版本  | 产品名称
| {debian} 9  | debian-9-pool-amd64
| {debian} 10 | debian-10-pool-amd64
|===

include::snippets/addchannels_vendor_cli.adoc[]

endif::[]


ifeval::[{uyuni-content} == true]

此过程所需的频道包括：

[[debian-channels-cli]]
[cols="1,1,1,1,1", options="header"]
.Debian 频道 - CLI
|===

| 操作系统版本
| 基础频道
| 客户端频道
| 更新频道
| 安全频道

| {debian} 9
| debian-9-pool-amd64-uyuni
| debian-9-amd64-uyuni-client
| debian-9-amd64-main-updates-uyuni
| debian-9-amd64-main-security-uyuni

| {debian} 10
| debian-10-pool-amd64-uyuni
| debian-10-amd64-uyuni-client
| debian-10-amd64-main-updates-uyuni
| debian-10-amd64-main-security-uyuni

|===

include::snippets/addchannels_novendor_cli.adoc[]

endif::[]



== 检查同步状态

ifeval::[{suma-content} == true]

include::snippets/check_sync_webui_suma.adoc[]

endif::[]

ifeval::[{uyuni-content} == true]

include::snippets/check_sync_webui_uyuni.adoc[]

endif::[]

include::snippets/check_sync_cli.adoc[]

[NOTE]
====
{debian} 频道可能会非常大。 同步所需的时间可能会长达数小时。
====



ifeval::[{uyuni-content} == true]

== 在客户端上信任 GPG 密钥

include::snippets/trust_gpg.adoc[]

[NOTE]
====
{debian} clients can require multiple GPG keys to be installed.
====

endif::[]



== 注册客户端

要注册您的 {debian} 客户端，需要有引导储存库。 默认会每天重新生成引导储存库。 您可以在命令提示符处使用以下命令手动创建引导储存库：

----
mgr-create-bootstrap-repo
----

对于 {debian}{nbsp}10，出现提示时请选择 ``debian10-amd64-uyuni``。


有关注册客户端的详细信息，请参见 xref:client- configuration:registration-overview.adoc[]。
