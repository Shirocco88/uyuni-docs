[[server-setup]]
= Nastavení serveru Uyuni

Tato část popisuje nastavení serveru {productname} postupy:

* Začněte instalací {productname} službou {yast}
* Vytvořte hlavní účet správy pomocí {productname} {webui}
* Pojmenujte svou základní organizaci a přidejte přihlašovací údaje
* Synchronizujte produktový kanál {sle} z {scc}



[[server-setup-yast]]
== Nastavit {productname} pomocí {yast}

Tato část vás provede instalačními postupy {productname}.

.Postup: Nastavení {productname}
. Přihlaste se k serveru {productname} a spusťte {yast}.

. V programu {yast} přejděte do menu:Network Services[Uyuni Setup] (Síťové služby [Uyuni Setup]) a zahajte instalaci.

. Na úvodní obrazovce vyberte menu:Uyuni Setup[Set up Uyuni from scratch] (Nastavení Uyuni[Nastavit Uyuni od počátku]) a pokračujte stisknutím btn:[Next] (Další).

. Zadejte e-mailovou adresu pro zasílání oznámení o stavu a pokračujte stisknutím btn:[Next] (Další).
    {productname} může někdy posílat velké množství e-mailů s oznámeními. Je-li třeba, můžete po nastavení deaktivovat e-mailová oznámení na {webui}.

. Zadejte informace o svém certifikátu a heslo.
    Hesla musí mít minimálně sedm znaků a nesmí obsahovat mezery, jednoduché nebo dvojité uvozovky (``'`` nebo ``"``), vykřičníky (``! ``) ani znaky dolaru (``$``). Hesla vždy ukládejte na bezpečné místo.
+

[IMPORTANT]
====
Pro nastavení proxy {productname} musíte mít heslo k certifikátu.
====

. Pokračujte stisknutím btn:[Next] (Další).
+


. Z obrazovky menu:Uyuni Setup[Database Settings] (Nastavení Uyuni [Nastavení databáze]) zadejte uživatele a heslo databáze a pokračujte stisknutím btn:[Next] (Další).
    Hesla musí mít minimálně sedm znaků a nesmí obsahovat mezery, jednoduché nebo dvojité uvozovky (``'`` nebo ``"``), vykřičníky (``! ``) ani znaky dolaru (``$``). Hesla vždy ukládejte na bezpečné místo.
+


. Pokračujte stisknutím btn:[Next] (Další).

. Po zobrazení výzvy stisknutím btn:[Yes] (Ano) spustíte instalaci.

. Po dokončení instalace pokračujte stisknutím btn:[Next] (Další).
    Uvidíte adresu {productname} {webui}.

. Stisknutím btn:[Finish] (Dokončit) dokončete nastavení {productname}.



== Vytvořte účet hlavní správy

Tato část pojednává o tom, jak vytvořit hlavní účet správy vaší organizace pro {productname}.

[WARNING]
====
Účet hlavní správy má nejvyšší oprávnění v rámci {productname}. Zajistěte, aby přístupové informace k tomuto účtu byly zabezpečeny.

Doporučujeme, abyste pro organizace a skupiny vytvořili účty správy nižší úrovně. Nesdílejte přístupové údaje pro hlavní správu.
====


.Postup: Nastavení hlavního účtu správy

. Ve webovém prohlížeči zadejte adresu {productname} {webui}.
    Tato adresa byla poskytnuta po dokončení instalace. Další informace viz xref:uyuni-server-setup.adoc#server-setup-yast[].

. Přihlaste se k {webui}, přejděte do pole menu:Create Organization[Organization Name] (Vytvořit organizaci[Název organizace]) a zadejte název vaší organizace.

. V polích menu:Create Organization[Desired Login] (Vytvořit organizaci [požadované přihlášení]) a menu:Create Organization[Desired Password] (Vytvořit organizaci [požadované heslo]) zadejte své uživatelské jméno a heslo.

. Vyplňte pole "Informace o účtu" včetně e-mailu pro systémová upozornění.

. Stisknutím btn:[Create Organization] (Vytvořit organizaci) dokončete vytváření účtu správy.
+


Po dokončení nastavení {productname} {webui} se dostanete na stránku menu:Home[Overview] (Domovská stránka [Přehled]).


== Volitelné: Synchronizace produktů z {scc}

{scc} (SCC) udržuje sbírku úložišť, která obsahují balíčky, software a aktualizace pro všechny podporované podnikové klientské systémy. Tato úložiště jsou uspořádána do kanálů, z nichž každý poskytuje software specifický pro distribuci, vydání a architekturu. Po synchronizaci se SCC mohou klienti dostávat aktualizace, být organizováni do skupin a přiřazeni ke konkrétním softwarovým kanálům produktu.

Tato část pojednává o synchronizaci se SCC z webu {webui} a o přidání vašeho prvního klientského kanálu.

[NOTE]
====
Pro Uyuni je synchronizace produktů z {scc} volitelná.
====

Než budete moci synchronizovat softwarová úložiště se SCC, budete muset do {productname} zadat pověření organizace. Pověření organizace vám umožňují přístup ke stažení produktu {suse}. Pověření vaší organizace najdete na https://scc.suse.com/organizations.

Zaznamenejte si přihlašovací údaje své organizace do {productname} {webui}:


[[proc-admin-organization-credentials]]
.Postup: Zadání pověření organizace
. Na webu {susemgr} {webui} přejděte do menu:Main Menu[Admin>Setup Wizard] (Hlavní menu[Správce>Průvodce nastavením]).
. Na stránce [guimenu]``Setup Wizard`` (Průvodce nastavením) najděte kartu btn:[Organization Credentials] (Pověření organizace).
. Stiskněte btn:[Add a new credential] (Přidat nové pověření).
. Zadejte uživatelské jméno a heslo a stiskněte btn:[Save] (Uložit).

Po potvrzení pověření se zobrazí ikona zaškrtnutí. Po úspěšném zadání nových pověření můžete provést synchronizaci se {scc}.


[[proc-quickstart-first-channel-sync]]
.Postup: Synchronizace se {scc}
. Na webu {productname} {webui} přejděte do menu:Admin[Setup Wizard] (Správce[Průvodce nastavením]).

. Na stránce [guimenu]``Setup Wizard`` (Průvodce nastavením) vyberte kartu btn:[SUSE Products].
    Chvíli počkejte, až se seznam produktů naplní. Pokud jste se dříve zaregistrovali u {scc}, tabulku naplní seznam produktů. Tato tabulka uvádí architekturu, kanály a informace o stavu. Další informace viz xref:reference:admin/setup-wizard.adoc[Wizard](Průvodce).
+

image::admin_suse_products.png[scaledwidth=80%]

. Je-li váš klient {sle} založen na architektuře [systemitem]``x86_64``, posuňte stránku dolů a zaškrtněte políčko u tohoto kanálu.
+

* Přidejte kanály do {productname} zaškrtnutím políčka nalevo od každého kanálu.
    Kliknutím na symbol šipky vlevo od popisu rozbalíte produkt a zobrazíte seznam dostupných modulů.
* Kliknutím na btn:[Add Products] (Přidat produkty) spustíte synchronizaci produktu.

Po přidání kanálu naplánuje {productname} synchronizaci kanálu. To může trvat dlouho, protože {productname} zkopíruje zdroje softwaru kanálu z úložišť {suse} umístěných na {scc} do místního adresáře [cesta] ``/var/spacewalk/`` vašeho serveru.


[NOTE]
====
V některých prostředích mohou transparentní obrovské stránky poskytované jádrem výrazně zpomalit pracovní zatížení PostgreSQL.

Chcete-li zakázat transparentní obří stránky, nastavte parametr jádra [parametr]``transparent_hugepage`` na ``never`` (nikdy). Budete také muset otevřít soubor [path]``/etc/default/grub`` a přidat nebo upravit řádek [option]``GRUB_CMDLINE_LINUX_DEFAULT``. Například:

----
GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda1 splash=silent quiet showopts elevator=noop transparent_hugepage=never"
----

Chcete-li napsat novou konfiguraci, spusťte [command]``grub2-mkconfig -o /boot/grub2/grub.cfg``.
====

Sledujte proces synchronizace kanálu v reálném čase prohlížením souborů protokolu kanálu umístěných v adresáři [path]``/var/log/rhn/reposync``:

----
tail -f /var/log/rhn/reposync/<NÁZEV_KANÁLU>.log
----

Po dokončení procesu synchronizace kanálu můžete pokračovat v registraci klienta. Další pokyny viz xref:client-configuration:registration-overview.adoc[].
