[[server-setup]]
= Nastavení serveru SUSE Manager

Tato část popisuje nastavení serveru {productname} postupy:

* Spusťte instalaci {productname} pomocí YaST
* Vytvořte hlavní účet správy pomocí {productname} {webui}
* Pojmenujte svou základní organizaci a přidejte přihlašovací údaje
* Synchronizujte produktový kanál {sle} z {scc}

[WARNING]
====
{productname} je součástí rodiny produktů {sle} a je tedy kompatibilní se softwarem dodávaným se {sles}.

{productname} je složitý systém, a proto není instalace softwaru třetích stran povolena. Instalace monitorovacího softwaru poskytovaného prodejcem třetí strany je povolena pouze v případě, že nevyměňuje základní knihovny, jako je SSL, kryptografický software a podobné nástroje. V rámci poskytování podpory produktu si společnost SUSE vyhrazuje právo požádat o odstranění veškerého softwaru třetích stran (a souvisejících změn konfigurace) a poté problém reprodukovat v čistém systému.
====


[IMPORTANT]
====
Neregistrujte si server {productname} na sebe. Server {productname} musí být spravován jednotlivě nebo pomocí jiného samostatného serveru {productname}. Další informace o použití více serverů viz xref:large-deployments:multi-server.adoc[].
====



== Nastavte {productname} programem YaST

Tato část vás provede nastavením {productname} nástrojem {yast}.



.Postup: Nastavení {productname}
. Na serveru {productname} z příkazového řádku spusťte instalaci příkazem [command]``yast2 susemanager_setup``.
. Na úvodní obrazovce vyberte menu:SUSE Manager Setup[Setup SUSE Manager from scratch] (Nastavení správce SUSE[Nastavení správce SUSE od začátku]) a pokračujte stisknutím btn:[Next] (Další).
. Zadejte e-mailovou adresu pro zasílání oznámení o stavu a pokračujte stisknutím btn:[Next] (Další).
    {productname} může někdy posílat velké množství e-mailů s oznámeními. Je-li třeba, můžete po nastavení deaktivovat e-mailová oznámení na {webui}. Další údaje o vypnutí e-mailových upozornění viz xref:reference:users/user-details.adoc[].
. Zadejte informace o svém certifikátu a heslo.
    Chcete-li použít vlastní certifikát SSL, musíte jej nejprve nastavit. Další informace o certifikátech SSL viz xref:administration:ssl-certs.adoc[].
+
image::quickstart-mgr-setup4-ncurses.png[scaledwidth=80%]
. Pokračujte stisknutím btn:[Next] (Další).
. Z obrazovky menu:SUSE Manager Setup[Database Settings] (Nastavení správce SUSE [Nastavení databáze]) zadejte uživatele a heslo databáze a pokračujte stisknutím btn:[Next] (Další).
+
image::quickstart-mgr-setup5-ncurses.png[scaledwidth=80%]
. Pokračujte stisknutím btn:[Next] (Další).
. Stisknutím btn:[Yes] (Ano) spustíte instalaci po zobrazení výzvy a počkejte na dokončení.
. Pokračujte stisknutím btn:[Next] (Další).
    Poznamenejte si adresu {productname} {webui}.
. Stisknutím btn:[Finish] (Dokončit) dokončete nastavení {productname}.

[IMPORTANT]
====
Při vytváření hesla k certifikátu se ujistěte, že má délku alespoň sedm znaků. Nesmí obsahovat mezery, jednoduché nebo dvojité uvozovky (``'`` nebo ``"``), vykřičníky (``!``) ani znaky dolaru (``$``). Hesla si vždy ukládejte na bezpečném místě. Bez tohoto hesla nebude možné nastavit proxy {productname}.
====


== Vytvoření hlavního účtu pro správu

Tato část vás provede vytvořením hlavního účtu správy {productname} vaší organizace.

[WARNING]
====
Hlavní účet pro správu {productname} Vaší organizace je _účet nejvyšší autority_, a proto by informace o přístupu k účtu měly být uloženy na bezpečném nebo zabezpečeném místě.

Kvůli bezpečnosti se doporučuje, aby hlavní správce vytvořil _správcovské účty nízké úrovně_ určené pro správu organizací a jednotlivých skupin.
====


.Postup: Nastavení hlavního účtu správy
. Po dokončení nastavení zadejte do prohlížeče poskytnutou adresu.
    Na této adrese otevřete {productname} {webui}.

. Ve {webui} přejděte do pole menu:Create Organization[Organization Name] (Vytvořit organizaci [Název organizace]) a zadejte název vaší organizace.

. V polích menu:Create Organization[Desired Login] (Vytvořit organizaci [požadované přihlášení]) a menu:Create Organization[Desired Password] (Vytvořit organizaci [požadované heslo]) zadejte své uživatelské jméno a heslo.

. Vyplňte pole "Informace o účtu" včetně e-mailu pro systémová upozornění.

. Stisknutím btn:[Create Organization] (Vytvořit organizaci) dokončete vytváření účtu správy.
+

image::quickstart-mgr-setup-admin1.png[scaledwidth=80%]

Nyní se vám zobrazuje {productname} menu:Home[Overview] (Domů[Přehled]).


== Synchronizace produktů ze {scc}

{scc} (SCC) udržuje sbírku úložišť, která obsahují balíčky, software a aktualizace pro všechny podporované podnikové klientské systémy. Tato úložiště jsou uspořádána do kanálů, z nichž každý poskytuje software specifický pro distribuci, vydání a architekturu. Po synchronizaci se SCC mohou klienty dostávat aktualizace a mohou být organizovány do skupin a přiřazeny ke konkrétním softwarovým kanálům produktu.

Tato část pojednává o synchronizaci se SCC z webu {webui} a o přidání vašeho prvního klientského kanálu.

Než budete moci synchronizovat softwarová úložiště se SCC, budete muset zadat pověření organizace v {susemgr}. V předchozích verzích se místo toho používala takzvaná Zrcadlová pověření. Pověření organizace vám umožňují přístup ke stažení produktu SUSE. Pověření vaší organizace najdete na https://scc.suse.com/organizations.

Zadejte přihlašovací údaje své organizace do {susemgr} {webui}:


[[proc-admin-organization-credentials]]
.Postup: Zadání pověření organizace
. V {susemgr} {webui} vyberte menu:Admin[Setup Wizard] (Správce[Průvodce nastavením]).
. Na stránce [guimenu]``Průvodce nastavením`` vyberte záložku a kartu btn:[Organization Credentials] (Pověření organizace).
. Stiskněte btn:[Add a new credential] (Přidat nové pověření).
. V dialogovém okně zadejte [guimenu]``Username`` (Uživatelské jméno) a [guimenu]``Password`` (Heslo) a potvrďte stisknutím btn:[Save] (Uložit).

Když jsou pověření potvrzena ikonou zaškrtnutí, pokračujte <<proc-quickstart-first-channel-sync>>.


[[proc-quickstart-first-channel-sync]]
.Postup: Synchronizace se {scc}
. Ve {webui} přejděte do menu:Admin[Setup Wizard] (Správce [Průvodce nastavením]).

. Na stránce [guimenu]``Setup Wizard`` (Průvodce nastavením) vyberte kartu btn:[SUSE Products].
    Pokud jste se již dříve zaregistrovali u {scc}, naplní tabulku seznam produktů. Tato operace může trvat až několik minut. Můžete sledovat její postup v sekci vpravo ``Refresh the product catalog from SUSE Customer Center`` (Obnovit katalog produktu ze zákaznického centra SUSE). Tabulka produktů uvádí architekturu, kanály a informace o stavu. Další informace viz xref:reference:admin/setup-wizard.adoc[Wizard](Průvodce).
+

image::admin_suse_products.png[scaledwidth=80%]

. K filtraci seznamu zobrazených produktů použijte ``Filter by product description`` (Filtrovat podle popisu produktu) a ``Filter by architecture`` (Filtrovat podle architektury).
    Je-li váš klient {sle} založen na architektuře [systemitem]``x86_64``, posuňte stránku dolů a zaškrtněte políčko u tohoto kanálu.
+

* Přidejte kanály do {productname} zaškrtnutím políčka nalevo od každého kanálu.
    Kliknutím na symbol šipky vlevo od popisu rozbalíte produkt a zobrazíte seznam dostupných modulů.
* Kliknutím na btn:[Add Products] (Přidat produkty) spustíte synchronizaci produktu.

Po přidání kanálu naplánuje {productname} synchronizaci kanálu. To může trvat dlouho, protože {productname} zkopíruje zdroje softwaru kanálu z úložišť {suse} umístěných na {scc} do místního adresáře [cesta] ``/var/spacewalk/`` vašeho serveru.


[TIP]
.PostgreSQL a Transparent Huge Pages
====
V některých prostředích mohou _Transparent Huge Pages_ (transparentní obří stránky) poskytované jádrem významně zpomalit pracovní zatížení PostgreSQL.

Chcete-li deaktivovat _Transparentní obří stránky_, nastavte parametr jádra [option]``transparent_hugepage`` na [option]``never`` (nikdy). To je třeba změnit v [path]``/etc/default/grub`` a přidat do řádku [option]``GRUB_CMDLINE_LINUX_DEFAULT``, například:

----
GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda1 splash=silent quiet showopts elevator=noop transparent_hugepage=never"
----

Chcete-li napsat novou konfiguraci, spusťte [command]``grub2-mkconfig -o /boot/grub2/grub.cfg``.
====

Sledujte proces synchronizace kanálu v reálném čase prohlížením souborů protokolu kanálu umístěných v adresáři [path]``/var/log/rhn/reposync``:

----
tail -f /var/log/rhn/reposync/<NÁZEV_KANÁLU>.log
----

Po dokončení procesu synchronizace kanálu můžete pokračovat v registraci klienta. Další pokyny viz xref:client-configuration:registration-overview.adoc[].
