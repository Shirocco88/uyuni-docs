[[activation-keys]]
= 활성화 키

활성화 키는 기존 및 Salt 클라이언트에서 클라이언트가 올바른 소프트웨어 자격이 있는지, 적절한 채널에 연결하고 있는지, 관련 그룹에 가입되어 있는지 확인하는 데 사용됩니다. 각 활성화 키는 조직에 구속되며 키를 생성할 때 설정할 수 있습니다.

{productname}에서 활성화 키는 레이블이 있는 구성 설정 그룹입니다. 레이블을 부트스트랩 스크립트에 파라미터로 추가하여 활성화 키와 연결된 모든 구성 설정을 적용할 수 있습니다. 활성화 키 레이블을 부트스트랩 스크립트와 함께 사용하는 것이 좋습니다. 부트스트랩 스크립트가 실행될 때 레이블에 연결된 모든 구성 설정은 스크립트가 실행되는 시스템에 적용됩니다.

활성화 키가 지정할 수 있는 것은 다음과 같습니다.

* 채널 할당
* 시스템 유형 또는 추가 자격
* 연결 방법
* 구성 파일
* 설치할 패키지
* 시스템 그룹 할당

Activation keys are used at the time a client is registered, and not used again. After the client has been registered, the client can be changed in any way, regardless of what the activation key specifies. The association between the activation key and the client is recorded only for historical purposes.

image::provision-config-keys.png[scaledwidth=80%]



.절차: 활성화 키 생성
. {productname} {webui}에서 관리자 권한으로 menu:시스템[활성화 키]로 이동합니다.
. btn:[키 생성] 버튼을 클릭합니다.
. On the [guimenu]``Activation Key Details`` page, in the [guimenu]``Description`` field, enter a description of the activation key.
. In the [guimenu]``Key`` field, enter a name for the activation key.
    예를 들어 {sles}{nbsp}12{nbsp}SP4에 대해서는 ``SLES12-SP4``를 입력합니다.
+
[IMPORTANT]
====
{suse} 제품인 경우 [guimenu]``키`` 필드에 쉼표를 사용하지 마십시오. 하지만 Red Hat 제품인 경우 *반드시* 쉼표를 사용해야 합니다. 자세한 내용은 xref:reference:systems/activation-keys.adoc[]를 참조하십시오.
====
+
. [guimenu]``기본 채널`` 드롭다운 상자에서 적절한 기본 소프트웨어 채널을 선택하고, 관련 하위 채널이 작성되도록 허용합니다.
    자세한 내용은 xref:reference:admin/setup-wizard.adoc#vle.webui.admin.wizard.products[] 및 xref:administration:custom-channels.adoc[]를 참조하십시오.
. 필요한 하위 채널을 선택합니다(예: 필수 {susemgr} 도구 및 업데이트 채널).
. Check the [guimenu]``Add-On System Types`` check box if you need to enable any of the options.
. [guimenu]``연결 방법``은 [guimenu]``기본값``으로 설정된 상태 그대로 두는 것이 좋습니다.
. [guimenu]``범용 기본값`` 설정은 확인란이 선택되지 않은 상태 그대로 두는 것이 좋습니다.
. btn:[활성화 키 생성]을 클릭하여 활성화 키를 생성합니다.
. [guimenu]``구성 파일 배포`` 확인란을 선택하여 이 키에 대한 구성 관리를 활성화하고, btn:[활성화 키 업데이트]를 클릭하여 이 변경 사항을 저장합니다.

[NOTE]
====
[guimenu]``구성 파일 배포`` 확인란은 활성화 키를 생성한 후에야 표시됩니다. 구성 관리를 활성화해야 하는 경우 되돌아가 확인란을 선택하십시오.
====



== Combining Multiple Activation Keys

기존 클라이언트에서 부트스트랩 스크립트를 실행할 때 활성화 키를 결합할 수 있습니다. 키를 결합하면 시스템에서 설치된 것에 대해 더 많은 제어권을 확보할 수 있고 규모가 크거나 복잡한 환경에서 키가 중복되는 일이 줄어듭니다.

[NOTE]
====
활성화 키 결합은 기존 클라이언트에서만 작동합니다. Salt 클라이언트는 결합된 활성화 키를 지원하지 않습니다. Salt 클라이언트에서 결합된 키를 사용하는 경우 첫 번째 키만 사용됩니다.
====

명령 프롬프트나 단일 자동 설치 프로파일에서 여러 개의 활성화 키를 지정할 수 있습니다.

{productname} 서버의 명령 프롬프트에서 [command]``rhnreg_ks 명령을 사용하고, 키 이름을 쉼표로 구분하십시오. {kickstart} 프로파일에서 여러 개의 키를 지정하려면 menu:시스템[자동 설치]로 이동하여 사용하려는 프로파일을 편집하십시오.

일부 값들 사이의 충돌로 인해 클라이언트 등록이 실패할 수 있으므로 활성화 키를 결합할 때 주의하십시오. 시작하기 전에 다음 값에 서로 충돌하는 정보가 있는지 확인하십시오.

* 소프트웨어 패키지
* 소프트웨어 하위 채널
* 구성 채널

충돌이 감지되면 다음과 같이 처리됩니다.

* 기본 소프트웨어 채널의 충돌: 등록에 실패합니다.
* 시스템 유형의 충돌: 등록에 실패합니다.
* ‘구성 활성화’ 플래그의 충돌: 구성 관리가 활성화됩니다.
* 한 개의 키가 시스템 전용인 경우: 등록에 실패합니다.



== 재활성화 키

클라이언트를 다시 등록하고 모든 {productname} 설정을 다시 확보하기 위한 목적으로 재활성화 키를 한 번만 사용할 수 있습니다. 재활성화 키는 클라이언트 전용이며 시스템 ID, 이력, 그룹 및 채널을 포함합니다.

재활성화 키를 생성하려면 [guimenu]``시스템``으로 이동한 후 클라이언트를 클릭하여 재활성화 키를 생성하고, menu:상세 정보[재활성] 탭으로 이동하십시오. btn:[새 키 생성]을 클릭하여 재활성화 키를 생성합니다. 나중에 사용할 수 있도록 키의 상세 정보를 기록해 둡니다. 특정 시스템 ID와 연결되지 않은 일반적인 활성화 키와 달리 여기에서 생성한 키는 menu:시스템[활성화 키] 페이지에 표시되지 않습니다.

Salt 클라이언트의 경우 재활성화 키를 생성한 후 이 키를 ``management_key`` [path]``/etc/salt/minion.d/susemanager.conf``에서 입자로 사용할 수 있습니다. 예:

----
grains:
    susemanager:
        management_key: "re-1-daf44db90c0853edbb5db03f2b37986e"
----

재활성화 키를 적용하려면 [command]``salt-minion`` 프로세스를 다시 시작하십시오.

재활성화 키를 부트스트랩 스크립트와 함께 사용할 수 있습니다. 부트스트랩 스크립트에 대한 자세한 내용은 xref:client-configuration:registration-bootstrap.adoc[]을 참조하십시오.

기존 클라이언트의 경우 재활성화 키를 생성한 후 이 키를 [command]``rhnreg_ks`` 명령줄 유틸리티와 함께 사용할 수 있습니다. 이 명령은 클라이언트를 다시 등록하고 {productname} 설정을 복원합니다. 기존 클라이언트에서는 재활성화 키를 활성화 키와 결합하여 단일 시스템 프로파일에 대해 여러 키의 설정을 집계할 수 있습니다. 예:

----
rhnreg_ks --server=<server-url>/XMLRPC \
          --activationkey=<reactivation-key>,<activationkey> \
           --force
----

[WARNING]
====
클라이언트를 기존 {productname} 프로파일과 함께 자동 설치하는 경우 프로파일은 재활성화 키를 사용해 시스템을 다시 등록하고 설정을 복원합니다. 프로파일 기반 자동 설치가 진행 중일 때는 이 키를 재생성, 삭제 또는 사용하지 마십시오. 그러면 자동 설치에 실패하게 됩니다.
====



== 활성화 키 모범 사례

.기본 상위 채널

[systemitem]``SUSE Manager 기본값`` 상위 채널을 사용하지 마십시오. 이 설정은 {productname}가 설치된 운영 체제와 가장 부합하는 상위 채널을 선택하도록 강제합니다. 이로 인해 때로 예기치 않은 동작이 발생할 수 있습니다. 대신에 각 배포 및 아키텍처별로 활성화 키를 생성하는 것이 좋습니다.

.활성화 키를 이용한 부트스트래핑

부트스트랩 스크립트를 사용 중인 경우 각 스크립트에 대해 활성화 키를 생성하는 것을 고려하십시오. 이렇게 하면 채널 할당, 패키지 설치, 시스템 그룹 구성원, 구성 채널 할당을 조정하는 데 도움이 됩니다. 또한 등록 후 시스템에 대한 수동 개입이 덜 필요합니다.

.대역폭 요구사항

활성화 키를 사용하면 등록 시점에 소프트웨어가 자동으로 다운로드될 수 있는데, 대역폭이 제한된 환경에서는 바람직하지 않을 수 있습니다.

다음 옵션은 대역폭을 사용합니다.

* SUSE 제품 풀 채널을 할당하면 해당 제품 설명자 패키지가 자동으로 설치됩니다.
* [guimenu] 섹션의 모든 패키지가``Packages`` 설치됩니다.
* [guimenu]``구성`` 섹션의 모든 Salt 상태가 그 내용에 따라 다운로드를 트리거할 수 있습니다.

.키 레이블 명명

활성화 키에 대해 읽을 수 있는 이름을 입력하지 않으면 시스템이 수 스트링을 자동으로 생성하므로 키를 관리하기 어려울 수 있습니다.

키를 추적하는 데 도움이 되는 활성화 키 명명 스키마를 고려하십시오. 조직의 인프라와 관련이 있는 이름을 생성하면 더 복잡한 작업을 더 쉽게 수행할 수 있습니다.

키 레이블을 생성할 때 다음과 같은 팁을 참고하십시오.

* OS 명명(필수): 키는 항상 자신이 설정을 제공하는 대상인 OS를 참조해야 합니다.
* 아키텍처 명명(권장): 귀사가 단 하나의 아키텍처(예: x86_64)만 운영하고 있지 않다면 레이블에 아키텍처 유형을 제공하는 것이 좋습니다.
* 서버 유형 명명: 이 서버를 어떤 목적으로 사용 중입니까?
* 위치 명명: 서버가 어디에 있습니까? 서버룸, 건물 또는 부서 내?
* 날짜 명명: 유지보수 기간, 분기 등
* 사용자 정의 명명: 어떤 명명 스키마가 조직의 필요에 적합합니까?

활성화 키 레이블 이름의 예:

----
sles12-sp2-web_server-room_129-x86_64
----

----
sles12-sp2-test_packages-blg_502-room_21-ppc64le
----

[IMPORTANT]
====
{suse} 제품인 경우 [guimenu]``키`` 필드에 쉼표를 사용하지 마십시오. 하지만 Red Hat 제품인 경우 *반드시* 쉼표를 사용해야 합니다. 자세한 내용은 xref:reference:systems/activation-keys.adoc[]를 참조하십시오.
====

.포함된 채널

활성화 키를 생성할 때는 어떤 소프트웨어 채널이 연결되어 있는지도 기억해 두어야 합니다. 키에는 할당된 특정 기본 채널이 있어야 합니다. 기본값으로 설정된 기본 채널은 사용하지 않는 것이 좋습니다. 자세한 내용은 xref:client-configuration:registration-overview.adoc[]에서 설치하려는 클라이언트 운영 체제를 참조하십시오.


