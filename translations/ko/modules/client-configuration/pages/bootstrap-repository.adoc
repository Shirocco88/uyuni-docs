[[client-cfg-tools-repository]]
= 부트스트랩 리포지토리

A bootstrap repository contains required packages for registering Salt or traditional clients during bootstrapping, as well as packages for installing Salt on clients. When products are synchronized, bootstrap repositories are automatically created and regenerated on the {productname} Server.


== 부트스트랩 리포지토리 생성 준비

동기화를 위해 제품을 선택하면 모든 필수 채널이 완전히 미러링되자마자 부트스트랩 리포지토리가 자동으로 생성됩니다.

ifeval::[{suma-content} == true]

include::snippets/check_sync_webui_suma.adoc[]

endif::[]

ifeval::[{uyuni-content} == true]

include::snippets/check_sync_webui_uyuni.adoc[]

endif::[]

include::snippets/check_sync_cli.adoc[]



== 자동 모드를 위한 옵션

자동 부트스트랩 리포지토리가 생성되는 방식을 변경할 수 있습니다. 이 섹션에서는 다양한 설정에 대해 자세히 설명합니다.



.플러시 모드

기본적으로 기존 리포지토리는 최신 패키지로만 업데이트됩니다. 대신, 빈 리포지토리로 항상 시작하도록 구성할 수 있습니다. 이 동작을 활성화하려면 다음과 같이 [path]``/etc/rhn/rhn.conf``에서 이 값을 추가하거나 편집하십시오.

----
server.susemanager.bootstrap_repo_flush = 1
----



.자동 모드

기본적으로 부트스트랩 리포지토리 자동 재생성은 활성화되어 있습니다. 이 작업을 비활성화하려면 다음과 같이 [path]``/etc/rhn/rhn.conf``에서 이 값을 추가하거나 편집하십시오.

----
server.susemanager.auto_generate_bootstrap_repo = 0
----



=== 부트스트랩 데이터 파일 구성

도구는 각 배포에 어떤 패키지가 필요한지에 대한 정보가 포함된 데이터 파일을 사용합니다. 이 데이터 파일은 [path]``/usr/share/susemanager/mgr_bootstrap_data.py``에 저장되어 있습니다. {suse}는 이 파일을 정기적으로 업데이트합니다. 이 파일을 변경하고 싶은 경우 직접 편집하지 마십시오. 대신, 다음과 같이 동일한 디렉토리에 사본을 생성하고 이 사본을 편집하십시오.

----
cd /usr/share/susemanager/
cp mgr_bootstrap_data.py my_data.py
----

변경을 완료했으면 새 파일을 사용하도록 {productname}를 구성하십시오. 다음과 같이 [path]``/etc/rhn/rhn.conf``에서 이 값을 추가하거나 편집하십시오.

----
server.susemanager.bootstrap_repo_datamodule = my_data
----

[IMPORTANT]
====
다음 업데이트에서 {suse}의 새 데이터는 새 데이터 파일이 아닌 원본 데이터 파일을 덮어씁니다. {suse}에서 제공하는 변경 사항으로 새 파일을 최신 상태로 유지해야 합니다.
====



== 부트스트랩 리포지토리를 수동으로 생성

By default, bootstrap repositories are regenerated daily. You can manually create the bootstrap repository from the command prompt.



.절차: {sle}용 부트스트랩 리포지토리 생성
. {productname} 서버의 명령 프롬프트에서 루트 권한으로 다음과 같이 사용 가능한 부트스트랩 리포지토리를 나열합니다.
+
----
mgr-create-bootstrap-repo -l
----
. 다음과 같이 적절한 리포지토리 이름을 제품 레이블로 사용해 부트스트랩 리포지토리를 생성합니다.
+
----
mgr-create-bootstrap-repo -c SLE-version-x86_64
----

클라이언트 리포지토리는 [path]``/srv/www/htdocs/pub/repositories/``에 있습니다.



If you have mirrored more than one product (for example, SLES and SLES for SAP), or if you use custom channels, you might need to specify the parent channel to use when creating the bootstrap repository. This is not required in every situation. For example, some SLES{nbsp}15 versions have common code bases, so there is no need to specify a parent channel. Use this procedure only if your environment requires it.



.OPTIONAL Procedure: Specifying a Parent Channel for a Bootstrap Repository
. 다음과 같이 보유한 상위 채널 중 어떤 것을 사용할 수 있는지 확인합니다.
+
----
mgr-create-bootstrap-repo -c SLE-15-x86_64
여러 개의 상위 채널용 옵션을 찾았습니다. 
 --with-parent-channel <label>옵션을 사용하고 다음 중 하나를 선택하십시오.
 - sle-product-sles15-pool-x86_64
 - sle-product-sles_sap15-pool-x86_64
 - sle-product-sled15-pool-x86_64
----
. 다음과 같이 적절한 상위 채널을 지정합니다.
+
----
mgr-create-bootstrap-repo -c SLE-15-x86_64 --with-parent-channel  sle-product-sled15-pool-x86_64
----



=== 아키텍처가 여러 개인 리포지토리


아키텍처가 여러 개 포함된 부트스트랩 리포지토리를 생성하는 경우 모든 아키텍처가 올바르게 업데이트되는지 주의 깊게 살펴봐야 합니다. 예를 들어 {slea}용 {ibmz} 및 {x86_64} 아키텍처가 ``/srv/www/htdocs/pub/repositories/sle/15/2/bootstrap/``에서 동일한 부트스트랩 리포지토리 URL을 사용합니다.

``flush`` 옵션이 활성화된 상태에서 여러 아키텍처에 대해 부트스트랩 리포지토리를 생성하려고 하면 하나의 아키텍처만 생성됩니다. 이를 방지하려면 추가 아키텍처를 생성할 때 명령 프롬프트에서 ``--no-flush`` 옵션을 사용하십시오. 예:

----
mgr-create-bootstrap-repo -c SLE-15-SP2-x86_64
mgr-create-bootstrap-repo --no-flush -c SLE-15-SP2-s390x
----



== 부트스트랩 및 사용자 지정 채널

사용자 지정 채널을 사용 중인 경우 [option]``--with-custom-channels`` 옵션을 [command]``mgr-create-bootstrap-repo`` 명령과 함께 사용할 수 있습니다. 이 경우 사용할 상위 채널도 지정해야 합니다.

사용자 지정 채널을 사용 중인 경우 부트스트랩 리포지토리 자동 생성에 실패할 수 있습니다. 이러한 경우에는 리포지토리를 수동으로 생성해야 합니다.

사용자 지정 채널에 대한 자세한 내용은 xref:administration:custom-channels.adoc[]을 참조하십시오.
