[server-major-upgrade]
= 서버 - 주요 업그레이드

{productname} 핵심 구성 요소가 새로운 주 버전으로 업그레이드되면 {productname} 서버에서 주요 업그레이드를 수행해야 합니다. PostgreSQL, Salt 또는 openSUSE Leap의 버전이 업그레이드되는 경우가 해당합니다. openSUSE Leap은 내부 기본 운영 체제(OS)입니다.

[IMPORTANT]
====
추가적인 수동 단계가 몇 가지 필요할 수 있으며 이 정보는 릴리스 노트에서만 제공됩니다. 업그레이드와 관련된 중요한 추가 정보는 릴리스 노트(https://www.uyuni-project.org/pages/stable-version.html)를 참조하십시오.
====


[command]``server-migrator.sh`` 스크립트를 통해 {productname} 서버가 최신 버전으로 마이그레이션됩니다. 또한 기본 운영 체제도 {opensuse-version} 버전으로 업그레이드됩니다. 스크립트는 [package]``susemanager`` 패키지의 일부입니다.


사용 중인 PostgreSQL 버전은 기본 운영 체제에 따라 다릅니다. {opensuse}{nbsp}Leap{nbsp}15.2는 PostgreSQL{nbsp}12를 사용하므로 해당 운영 체제에서 {uyuni}가 사용하는 버전입니다. {opensuse}{nbsp}Leap{nbsp}15.3에는 PostgreSQL{nbsp}13이 포함될 것으로 예상됩니다.



.절차: {productname} 서버 마이그레이션
. [command]``server-migrator.sh`` 스크립트를 실행하기 전, [package]``susemanager`` 패키지의 가장 최신 버전이 설치되어 있는지 확인하십시오.
+
----
zypper ref
zypper up susemanager
----
. [command]``/usr/lib/susemanager/bin/server-migrator.sh`` 스크립트를 실행하여 기본 OS 및 {productname} 서버를 실행합니다.
. 데이터베이스를 PostgreSQL 12로 마이그레이션하려면 마이그레이션 스크립트를 실행합니다.
+
----
/usr/lib/susemanager/bin/pg-migrate-10-to-12.sh
----
+
PostgreSQL 데이터베이스 마이그레이션에 대한 자세한 정보는 xref:db-migration-12.adoc[]을 참조하십시오.
. 데이터베이스를 PostgreSQL 12에서 PostgreSQL 13으로 마이그레이션하려면 마이그레이션 스크립트 실행:
+
----
/usr/lib/susemanager/bin/pg-migrate-12-to-13.sh
----
+
PostgreSQL 데이터베이스 마이그레이션에 대한 자세한 정보는 xref:db-migration-13.adoc[]을 참조하십시오.
. 데이터베이스를 PostgreSQL 10에서 PostgreSQL 13으로 마이그레이션하려면 마이그레이션 스크립트 실행:
+
----
/usr/lib/susemanager/bin/pg-migrate-10-to-13.sh
----
+
PostgreSQL 데이터베이스 마이그레이션에 대한 자세한 정보는 xref:db-migration-13.adoc[]을 참조하십시오.
. 마이그레이션이 완료된 후에는, {productname} 서버를 수동으로 재부팅합니다.
+
----
shutdown -r now
----


[IMPORTANT]
====
마이그레이션 중에 발생하는 문제는 수정할 수 없습니다. 마이그레이션을 시작하기 전 백업을 생성했어야 합니다. 가상 머신에서 {productname} 서버를 실행 중인 경우에는 스냅샷을 생성한 후 시작하는 것이 좋습니다.
====
