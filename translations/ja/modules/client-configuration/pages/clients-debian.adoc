[[clients-debian]]
= {debian}クライアントの登録

このセクションでは、{debian}オペレーティングシステムを実行しているSaltクライアントの登録について説明します。

[IMPORTANT]
====
{suse}は{debian}オペレーティングシステムをサポートしていません。 {productname}を使用すると、{debian}クライアントを管理できますが、サポートは提供されません。 {productname}を使用して{debian}クライアントを管理する方法は試験的な方法です。 この手順は、{debian}{nbsp}9 Stretchおよび{debian}{nbsp}10 Busterでテストされています。 稼動環境では{debian}クライアントを使用しないでください。
====

[NOTE]
====
{debian}はSaltクライアントでのみサポートされています。 従来のクライアントはサポートされていません。
====

ブートストラップは、初期状態の実行およびプロファイルの更新のために{debian}クライアントで使用できます。



== 登録の準備

{debian}クライアントを{productname}サーバに登録するには、その前に準備が必要です。

* If you are using Debian{nbsp}9, install the required packages on the client before you attempt to register. On the client, at the command prompt, as root, run:
+
----
apt install apt-transport-https python-apt python3-apt
----

* Ensure DNS is correctly configured and provides an entry for the client. Alternatively, you can configure the ``/etc/hosts`` files on both the {productname} Server and the client with the appropriate entries.
* The client must have the date and time synchronized with the {productname} Server before registration.



== ソフトウェアチャンネルの追加

{debian}クライアントを{productname}サーバに登録する前に、必要なソフトウェアチャンネルを追加して同期する必要があります。

ifeval::[{suma-content} == true]

このプロシージャで必要な製品は次のとおりです。

[[debian-channels-wizard]]
[cols="1,1", options="header"]
.Debian製品 - WebUI
|===
| OSバージョン  | 製品名
|{debian} 9  | Debian 9
 | {debian} 10 | Debian 10
|===

include::snippets/addchannels_vendor_webui.adoc[]

または、コマンドプロンプトでチャンネルを追加できます。 このプロシージャで必要なチャンネルは次のとおりです。

[[debian-channels-cli]]
[cols="1,1", options="header"]
.Debianチャンネル - CLI
|===
| OSバージョン  | 製品名
|{debian} 9  | debian-9-pool-amd64
 | {debian} 10 | debian-10-pool-amd64
|===

include::snippets/addchannels_vendor_cli.adoc[]

endif::[]


ifeval::[{uyuni-content} == true]

このプロシージャで必要なチャンネルは次のとおりです。

[[debian-channels-cli]]
[cols="1,1,1,1,1", options="header"]
.Debianチャンネル - CLI
|===

| OSバージョン
|ベースチャンネル
 | クライアントチャンネル
 | チャンネルの更新
 | セキュリティチャンネル
 
 | {debian} 9
 | debian-9-pool-amd64-uyuni
 | debian-9-amd64-uyuni-client
 | debian-9-amd64-main-updates-uyuni
 | debian-9-amd64-main-security-uyuni
 
 | {debian} 10
 | debian-10-pool-amd64-uyuni
 | debian-10-amd64-uyuni-client
 | debian-10-amd64-main-updates-uyuni
 | debian-10-amd64-main-security-uyuni

|===

include::snippets/addchannels_novendor_cli.adoc[]

endif::[]



== 同期ステータスの確認

ifeval::[{suma-content} == true]

include::snippets/check_sync_webui_suma.adoc[]

endif::[]

ifeval::[{uyuni-content} == true]

include::snippets/check_sync_webui_uyuni.adoc[]

endif::[]

include::snippets/check_sync_cli.adoc[]

[NOTE]
====
{debian}チャンネルは非常に大きいことがあります。 同期に数時間かかる場合があります。
====



ifeval::[{uyuni-content} == true]

== クライアントでGPGキーを信頼する

include::snippets/trust_gpg.adoc[]

[NOTE]
====
{debian}クライアントをインストールするには、複数のGPGキーが必要な場合があります。
====

endif::[]



== クライアントの登録

{debian}クライアントを登録するには、ブートストラップリポジトリが必要です。 デフォルトでは、ブートストラップリポジトリは毎日再生成されます。 次のコマンドを使用して、コマンドプロンプトからブートストラップリポジトリを手動で作成できます。

----
mgr-create-bootstrap-repo
----

{debian}{nbsp}10で、プロンプトが表示されたら``debian10-amd64-uyuni``を選択します。


クライアントの登録については、xref:client-configuration:registration-overview.adoc[]を参照してください。
