[[install-pubcloud-requirements]]
= パブリッククラウドの要件

このセクションは、パブリッククラウドインフラストラクチャに{productname}をインストールする要件について説明します。 Amazon EC2、Google Compute Engine、およびMicrosoft Azureではテストを実施済みですが、若干の差異はあってもその他のプロバイダにも当てはまるはずです。

始める前に、考慮事項を次に示します。

* {productname}設定プロシージャは、正引きで確認された逆引きDNS参照を実行します。 設定プロシージャが完了して{productname}が期待どおりに動作するためには、この参照が成功する必要があります。 {productname}を設定する前に、ホスト名とIPの設定を実行することが重要です。
* {productname}サーバとプロキシのインスタンスは、DNSエントリを介した制御を提供するネットワーク設定で実行する必要がありますが、大規模インターネットからはアクセスできません。
* このネットワーク設定内では、DNSの解決を提供する必要があります。`hostname -f`は、完全修飾ドメイン名(FQDN)を返す必要があります。
* DNSの解決は、クライアントを接続するためにも重要です。
* DNSは、選択したクラウドフレームワークに依存しています。 詳細な手順については、クラウドプロバイダのドキュメントを参照してください。
* 外部仮想ディスクでソフトウェアリポジトリ、サーバデータベース、およびプロキシsquidキャッシュを探すことをお勧めします。 こうすることによって、インスタンスが予期せずに終了した場合のデータ損失が防止されます。 このセクションでは、外部仮想ディスクの設定方法の手順について説明します。


[NOTE]
====
従来のクライアントをブートストラップしようとしている場合、クライアントにログインしている間にサーバのホスト名を解決できることを確認してください。 サーバのFQDNをクライアントの[path]``/etc/hosts``ローカル解決ファイルに追加する必要があります。 サーバのローカルIPアドレスで[command]``hostname -f``コマンドを使用していることを確認してください。
====



== ネットワーク要件

パブリッククラウドで{productname}を使用するとき、制約のあるネットワークを使用する必要があります。 適切なファイアウォール設定でVPCプライベートサブネットを使用することをお勧めします。 指定したIP範囲にあるマシンのみがインスタンスにアクセスできる必要があります。

[WARNING]
====
パブリッククラウドで{productname}を実行するとき、インスタンスへのアクセスを制限するようにセキュリティを適用する必要があります。 自由にアクセスできる{productname}インスタンスは、{productname} EULAの条項に違反しており、{suse}でサポートされません。
====

{productname}の{webui}にアクセスするには、ネットワークアクセス制御を設定するときにHTTPSを許可します。 そうすると、{productname}の{webui}にアクセスできます。

EC2およびAzureでは、新しいセキュリティグループを作成し、HTTPSの着信および受信のルールを追加します。 GCEでは、［``ファイアウォール``］セクションで［``HTTPSトラフィックを許可する``］ボックスにチェックを付けます。



== ストレージボリュームの準備

リポジトリと{productname}のデータベースは、ルートボリュームとは別のストレージデバイスに保存することをお勧めします。 こうするとデータの損失が防止されます。 パブリッククラウドのインストールでは、論理ボリューム管理(LVM)を使用しないでください。

YaST {productname}の設定手順を実行する前にストレージデバイスを設定する必要があります。

リポジトリストレージのディスクのサイズは、{productname}で管理するディストリビューションおよびチャンネルの数によって決まります。 仮想ディスクを接続すると、Unixデバイスノードとしてインスタンスに表示されます。 デバイスノードの名前は、選択インスタンスの種類とプロバイダによって異なります。

{productname}サーバのルートボリュームが100{nbsp}GB以上であることを確認してください。 500{nbsp}GB以上のストレージディスクを追加し、可能な場合にはSSDストレージを選択します。 {productname}サーバのクラウドイメージは、スクリプトを使用して、インスタンス起動時にこの個別ボリュームを割り当てます。

インスタンスを起動すると、{productname}サーバにログインし、次のコマンドを使用して、利用可能なすべてのストレージデバイスを検索できます。

----
hwinfo --disk | grep -E "デバイスファイル:"
----

選択したデバイスがわからない場合、[command]``lsblk``コマンドを使用して、各デバイスの名前およびサイズを確認します。 探している仮想ディスクのサイズと一致している名前を選択します。

[command]``suma-storage``コマンドを使用して外部ディスクを設定できます。 設定すると、XFSパーティションが``/manager_storage``にマウントされ、データベースおよびリポジトリの場所として使用されます。

----
/usr/bin/suma-storage <devicename>
----

ストレージボリュームおよびパーティションの設定(推奨最小サイズを含む)の詳細については、xref:installation:hardware-requirements.adoc[]を参照してください。
