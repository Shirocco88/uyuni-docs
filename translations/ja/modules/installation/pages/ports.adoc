[[ports]]
= ネットワークポート

このセクションには、{productname}内でのさまざまな通信に使用するポートの一覧が記載されています。

これらのポートすべてを開く必要はありません。 サービスの使用に必要なポートのみを開く必要があります。

次のイメージは、{productname}で使用される主なポートを示しています。

image::ports_diagram.png[]



== 外部の着信サーバポート

未許可アクセスからサーバを保護するために{productname}サーバでファイアウォールを設定するには、外部の着信ポートが開いている必要があります。

これらのポートを開くと、外部ネットワークトラフィックが{productname}サーバにアクセスできるようになります。


[cols="1,1,1,1", options="header"]
.{productname}サーバの外部ポートの要件
|===
| ポート番号 | プロトコル | 使用元 | 注意
| 22          |          |         | ssh-pushおよびssh-push-tunnelの接続メソッドに必要です。
 | 67          | TCP/UDP  | DHCP    | クライアントがサーバからIPアドレスをリクエストしている場合のみ必要です。
 | 69          | TCP/UDP  | TFTP    | 自動化されたクライアントのインストールのためにサーバがPXEサーバとして使用されている場合に必要です。
 | 80          | TCP      | HTTP    | 一部のブートストラップリポジトリおよび自動化されたインストールのために一時的に必要です。
ポート80は{webui}を操作するためには使用されません。
 | 443         | TCP      | HTTPS   | {webui}、クライアント、およびプロキシがリクエストします。
 | 4505        |  TCP     | salt    | クライアントからの通信リクエストを受け入れるために必要です。
クライアントは、接続を開始し、開いたままになり、Saltマスタからのコマンドを受信します。
 | 4506        | TCP      | salt    | クライアントからの通信リクエストを受け入れるために必要です。
クライアントは、接続を開始し、開いたままになり、Saltマスタに結果を返します。
 | 5222        | TCP      | osad    | OSADのアクションをクライアントにプッシュするために必要です。
 | 5269        | TCP      | jabberd | プロキシとの間でアクションをプッシュするために必要です。
 | 25151       | TCP      | Cobbler |
|===



== 外部の送信サーバポート

サーバからアクセスできるアクセス先を制限するために{productname}サーバでファイアウォールを設定するには、外部の送信ポートが開いている必要があります。

次のポートを開くと、{productname}サーバからのネットワークトラフィックで外部サービスに通信できます。

[cols="1,1,1,1", options="header"]
.{productname}サーバの外部ポートの要件
|===
| ポート番号 | プロトコル | 使用元 | 注意
|80          | TCP | HTTP       | {scc}で必要です。
ポート80は{webui}を操作するためには使用されません。
 | 443         | TCP | HTTPS      | {scc}で必要です。
 | 5269        | TCP | jabberd    | プロキシとの間でアクションをプッシュするために必要です。
 | 25151       | TCP | Cobbler    |
|===



== 内部サーバポート

内部ポートは、{productname}サーバによって内部で使用されます。 内部ポートは``localhost``のみからアクセスできます。

ほとんどの場合、これらのポートを調整する必要はありません。

[cols="1,1", options="header"]
.{productname}サーバの内部ポートの要件
|===
| ポート番号 | 注意
|2828        | サテライト検索APIであり、TomcatとTaskomaticのRHNアプリケーションで使用されます。
 | 2829        | Taskomatic APIであり、TomcatのRHNアプリケーションで使用されます。
 | 8005        | Tomcatのシャットダウンポート。
 | 8009        | TomcatからApache HTTPD (AJP)。
 | 8080        | TomcatからApache HTTPD (HTTP)。
 | 9080        | Salt-APIであり、TomcatとTaskomaticのRHNアプリケーションで使用されます。
 | 32000       | Taskomaticおよびサテライト検索を実行する仮想マシン(JVM)へのTCP接続用のポート。
|===


ポート32768以上は一時ポートとして使用されます。 これらは、TCP接続の受信に最も頻繁に使用されます。 TCP接続リクエストが受信されると、送信元はこれらの一時ポート番号のいずれかを選択して、宛先ポートと照合します。 次にコマンドを使用して、どのポートが一時ポートかを確認できます。

----
cat /proc/sys/net/ipv4/ip_local_port_range
----



== 外部の着信プロキシポート

未許可アクセスからプロキシを保護するために{productname}プロキシでファイアウォールを設定するには、外部の着信ポートが開いている必要があります。

これらのポートを開くと、外部ネットワークトラフィックが{productname}プロキシにアクセスできるようになります。

[cols="1,1,1,1", options="header"]
.{productname}プロキシの外部ポートの要件
|===
| ポート番号 | プロトコル | 使用元 | 注意
|22          |          |         | ssh-pushおよびssh-push-tunnelの接続メソッドに必要です。
プロキシに接続されているクライアントは、サーバへのチェックインを開始し、クライアントにホップします。
 | 67          | TCP/UDP  | DHCP    | クライアントがサーバからIPアドレスをリクエストしている場合のみ必要です。
 | 69          | TCP/UDP  | TFTP    | 自動化されたクライアントのインストールのためにサーバがPXEサーバとして使用されている場合に必要です。
 | 443         | TCP      | HTTPS   | {webui}、クライアント、およびプロキシがリクエストします。
 | 4505        | TCP      | salt    | クライアントからの通信リクエストを受け入れるために必要です。
クライアントは、接続を開始し、開いたままになり、Saltマスタからのコマンドを受信します。
 | 4506        | TCP      | salt    | クライアントからの通信リクエストを受け入れるために必要です。
クライアントは、接続を開始し、開いたままになり、Saltマスタに結果を返します。
 | 5222        | TCP      |         | OSADのアクションをクライアントにプッシュするために必要です。
 | 5269        | TCP      |         | サーバとの間でアクションをプッシュするために必要です。
|===



== 外部の送信プロキシポート

プロキシからアクセスできるアクセス先を制限するために{productname}プロキシでファイアウォールを設定するには、外部の送信ポートが開いている必要があります。

次のポートを開くと、{productname}プロキシからのネットワークトラフィックで外部サービスに通信できます。

[cols="1,1,1,1", options="header"]
.{productname}プロキシの外部ポートの要件
|===
| ポート番号 | プロトコル | 使用元 | 注意
|80          |          |         | サーバにアクセスするために使用します。
 | 443         | TCP      | HTTPS   | {scc}で必要です。
 | 5269        | TCP      |         | サーバとの間でアクションをプッシュするために必要です。
|===



== 外部クライアントポート

{productname}サーバとそのクライアントの間でファイアウォールを設定するには、外部クライアントポートが開いている必要があります。

ほとんどの場合、これらのポートを調整する必要はありません。

[cols="1,1,1,1", options="header"]
.{productname}クライアントの外部ポートの要件
|===
| ポート番号 | 方向 | プロトコル | 注意
|22          | 着信   | SSH      | ssh-pushおよびssh-push-tunnelの接続メソッドに必要です。
 | 80          | 送信  |          | サーバまたはプロキシにアクセスするために使用します。
 | 5222        | 送信  | TCP      | OSADのアクションをサーバまたはプロキシにプッシュするために必要です。
 | 9090        | 送信  | TCP      | Prometheusユーザインターフェースに必要です。
 | 9093        | 送信  | TCP      | Prometheus警告マネージャに必要です。
 | 9100        | 送信  | TCP      | Prometheusノードエクスポータに必要です。
 | 9117        | 送信  | TCP      | Prometheus Apacheエクスポータに必要です。
 | 9187        | 送信  | TCP      | Prometheus PostgreSQLに必要です。
|===



== 必要なURL

クライアントを登録して更新を実行するために{productname}がアクセスできる必要があるURLがあります。 ほとんどの場合、次のURLにアクセスできれば十分です。

* scc.suse.com
* updates.suse.com

{suse}以外のクライアントを使用している場合、該当するオペレーティングシステム用の特定のパッケージを提供するその他のサーバにもアクセスできる必要がある場合があります。 たとえば、{ubuntu}クライアントがある場合、{ubuntu}サーバにアクセスできる必要があります。

{suse}以外のクライアントでファイアウォールアクセスのトラブルシューティングを行う方法の詳細については、xref:administration:tshoot-firewalls.adoc[]を参照してください。
